<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd">
<body>
<wicket:extend>
    <br/><br/><br/>
    <h1>Руководство по разработке игры на основе движка Spring RTS</h1>
    <h2>(вольный перевод) <a target="_blank" href="https://springrts.com/wiki/The_Complete_Guide_To_Making_A_Spring_Game">Ссылка на оригинал</a></h2>

    <br/>
    <b>Все про разработку игр, основанных на Spring, собранно в одном месте</b>.<br/>
    Надо добавить, что это не единственный путь, а лишь один из возможных. Даже немного устаревший.<br/>
    Но все же, довольно простой, поэтому вам и предлагается попробовать.<br/><br/>

    Прежде, чем начать, сразу скажу: для прохождения данного урока, нужен компьютер с операционной системой Windows. Так как,
    надо будет установить специальную программу "UpSpring"(инстрцкция будет позже), и под linux сделать это проблематично.
    Если хотите разрабатывать под linux и mac, ждите другую, более продвинутую, статью.<br/><br/>

    <b>Полезные ссылки:</b><br/>
    <a target="_blank" href="http://springfiles.com/spring/games/empty-mod">Пустая игра</a> - структура каталогов и файлы,
    кторые необходимы для того, чтобы сделать простейшую игру. Содержит 1 куб<br/>
    <a target="_blank" href="http://springfiles.com/spring/games/empty-mod-plus-tank">Пустая игра + танк</a> - структура каталогов
    + файлы, необходимые для простейшей игры, в которой есть один работающий танк<br/>
    <a target="_blank" href="http://springfiles.com/spring/games/example-mod">Игра-пример</a> - очень простая игра, включающая
    танк, завод, строитель, энергетическая башня<br/><br/>

    <b>Установка Spring</b><br/><br/>
    Для начала, вам нужно убедиться, что установлен сам движок "Spring". Для наших целей лучше всего подойдет portable версия.

    Если вы не скачивали игры и карты, скачайте <a target="_blank" href="http://springfiles.com/spring/games/example-mod">игру-пример</a> и
    <a target="_blank" href="http://springfiles.com/spring/spring-maps/smallsupremebattlefieldv2">маленькую карту</a><br/><br/>

    Скачанную игру надо положить в директорию games, а карту - в директорию maps (директории внутри директории, куда установили Spring).<br/>
    Если вы скачали "движок" через SpringLobby, то он лежит в <br/>

    После установки игры и карты, перезапустите springlobby и перейдите на вкладку "Single Player" или "одиночная игра",
    выберите эту игру(Example Mod) и карту, добавьте любого бота, например AAI, и запустите. Убедитесь, что все работает.
    (игра пустая, содержит только юнит-коробку)<br/><br/>

    <b>Программы, которые понадобятся в этом руководстве:</b><br/><br/>
    <a target="_blank" href="http://www.gimp.org/downloads/">The GIMP</a> - бесплатный графический редактор<br/><br/>
    <a target="_blank" href="http://www.wings3d.com/">Wings 3D</a> - бесплатный инструмент моделирования<br/><br/>
    И любой текстовый редактор, желательно с подсветкой синтаксиса. Например: <a target="_blank" href="http://notepad-plus-plus.org/">Notepad++</a><br/><br/>

    <b>Разработка 3д модели</b><br/><br/>
    Существует <a target="_blank" href="http://www.wings3d.com/tutorials.php">множество</a>
    <a target="_blank" href="http://wiki.beyondunreal.com/Legacy:Wings3D/Getting_Started">более крутых</a>
    <a target="_blank" href="http://tutorial-index.com/index.php/site/site_category/tut_wings_3d/">руководств</a> по Wings 3D,
    рекомендуется, пройти именно их. Но мы все же рассмотрим простой пример тут, чтобы данное руководство получилось действительно полным.<br/><br/>

    Если вдруг вы хотите пропустить этот раздел, то вы можете взять полную модель без текстур, просто распаковав (zip архиватором)<br/><br/>
    <a target="_blank" href="http://www.springfiles.com/show_file.php?id=2821">этот архив</a>. Модель лежит внутри /objects3d<br/><br/>

    Итак, запустите Wings 3D. Изначально, окно выглядит как-то так:<br/><br/>
    <img src="https://springrts.com/mediawiki/images/b/b2/Wings1.png"><br/><br/>

    Нажмите правой кнопкой мыши и подвигайте. Экран должен вращаться. Кликните левой кнопкой, чтобы выйти из этого режима.
    Покрутите колесико мыши, чтобы приблизить или отдалить сцену. Во время режима вращения,
    нажмите и држите среднюю кнопку мыши + двигайте мышью, чтобы перемещать экран.
    А если нажмете правой кнопкой мыши на заднем фоне, то получите меню.<br/><br/>
    <img src="https://springrts.com/mediawiki/images/f/f8/Wings2.png"><br/><br/>

    Вызовите меню и нажмите на квадратик справа от пункта Cube (не на сам пункт). Вам предложат ввести размеры, введите
    20x20x20 и нажмите OK. Вы получите достаточно большой куб, и вам нужно отдалить камеру, чтобы увидеть его полностью.<br/><br/>
    <img src="https://springrts.com/mediawiki/images/a/a4/Wings3.png"><br/><br/>

    Посмотрите на верхнюю панель, там вы найдете эти кнопки:<br/>
    <img src="https://springrts.com/mediawiki/images/7/7a/Wings4.png"><br/><br/>

    Они нужны, чтобы выделять вершины, углы, ребра, плоскости и т.п. Поэкспериментируйте с ними и вы поймете, как они работают.
    Если нажать на какой-нибудь объект, то он выделяется. Но с выделенных до этого объектов, выделение не снимается.
    Чтобы убрать выделение с выделенного объекта, надо на него кликнуть мышью. Или нажать пробел, для снятия выделения со всех объектов.<br/><br/>

    Для этих кнопок есть горячие клавиши: v, e, f, b. Лучше их выучить, они очень пригодятся!<br/><br/>

    Как вы, наверно, заметили, куб наполовину уходит вниз, под землю. Чтобы его поднять, выделите весь куб и вызовите меню.<br/><br/>

    Выберите пункт "Move", и в появившимся окне, выберите ось "Y". Подвигайте мышью влево и вправо. Чтобы распологать объекты более точно, нажмите
    клавишу Shift во время движения. Нажмите левой кнопкой мыши, чтобы поместить объект. Или правой, чтобы отменить перемещение<br/><br/>
    Если держать Ctrl или Ctrl+Shift, то вы будете перемещать еще более точно и медленно. <br/>
    <img src="https://springrts.com/mediawiki/images/c/c7/Wings5.png"><br/><br/>

    Нажмите клавишу f, чтобы перейти в режим "Face". Или кликните на соответствующую кнопку на верхней панели. Выделите только верхнюю плоскость.
    Далее, вызовите меню и выберите пункт "Scale Uniform". Уменьшите размер до 50% (Ctrl поможет быть точным). После этих действий,
    подвиньте эту верхнюю грань вниз на 10 пунктов. <br/>
    <img src="https://springrts.com/mediawiki/images/9/9e/Wings6.png"><br/><br/>

    Теперь добавим еще один куб - это будет пушка (ствол). На этот раз нам не надо никаких свойств, так что можно просто жать на сам пункт меню "Cube".<br/>
    <img src="https://springrts.com/mediawiki/images/9/9e/Wings6.png"/><br/><br/>

    О нет! А где же новый куб?? Без паники! Нажмите на "Window" (это пункт главного меню. сверху), и выберите там "Outliner".
    Таким же способом, откройте "Geometry Graph".<br/>
    <img src="https://springrts.com/mediawiki/images/7/73/Wings7.png"><br/><br/>

    Эти окна очень полезны, они отображают все объекты. Подвиньте эти окна и измените их размер, чтобы было удобно. Из окна
    "Geometry Graph", вы можете выбрать любой объект модели. Выберите верхний объект, кликнув на его серый куб.<br/>
    <img src="https://springrts.com/mediawiki/images/6/62/Wings8.png"><br/><br/>

    А теперь развыделите его, нажав пробел. И выделите другой (нижний). Затем вызовите меню, move.. и двигайте вверх по оси Y. <br/>
    <img src="https://springrts.com/mediawiki/images/c/c9/Wings9.png"><br/><br/>

    В итоге. переместите этот куб на 12 пунктов вверх, чтобы он как-бы висел над другим объектом. <br/>
    А теперь выберите плоскость, которая смотрит на вас (вперед юнита). Это ось Z. При выделении, эта ось подсвечивается синим. 
    Нажмите правой кнопкой, выберите Move, и переместите так, чтобы "ствол" был достаточно длинным.<br/>
    <img src="https://springrts.com/mediawiki/images/5/58/Wings10.png"><br/><br/>

    Теперь создайте сферу 10 на 10 (x и y radial) и переместите ее на верх модели.<br/>
    <img src="https://springrts.com/mediawiki/images/b/bb/Wings11.png"><br/><br/>

    Теперь добавим этому уродливому танку немного гусиниц. Выберите выделение Edge (e клавиша) и выберите боковые ребра.<br/>
    <img src="https://springrts.com/mediawiki/images/b/b2/Wings12.png"><br/><br/>

    Нажмите клавишу C. Новое ребро, соединяющее два выбранных, должно появиться. Теперь выберите нижнюю половинку (поверхность).
    Вызовите меню и выберите пункт "extrude". Выдвините на 2 пункта по оси X.<br/>
    <img src="https://springrts.com/mediawiki/images/d/d0/Wings13.png"><br/><br/>

    То же самое сделайте и с другой стороны.<br/>
    А теперь, выдвигайте эти гусиницы вперед и назад, по оси Z.<br/>
    <img src="https://springrts.com/mediawiki/images/f/f9/Wings14.png"><br/><br/>

    Вот и все! Модель нашего танка готова!<br/>
    Перед тем, как наносить текстуры, надо воспользоваться "edge" инструментом (e клавиша).
    Выберите все ребра кубов (из geometry graph окна), вызовите меню, и поставьте Hardness в значение Hard. Цвет ребер изменится на оранжевый.<br/>
    И, когда вы нажмете на эту кнопку<br/>
    <img src="https://springrts.com/mediawiki/images/9/91/Wings15.png"><br/><br/>

    это даст вам более законченный вид: сглажены все неровности, а hard edges (ребра, что мы сделали жесткими), так и остались четкими.
    Это все еще не выглядит изумительно на данной стадии, особенно без текстур, но когда юнит будет уже в игре, эти мягкие и жесткие ребра - помогут
    юниту выглядеть лучше. Конечно, вы можете этот шаг сделать и позже. Это просто хорошее время, чтобы про эту фишку рассказать.<br/>
    <img src="https://springrts.com/mediawiki/images/0/01/Wings16.png"><br/><br/>

    Чтож, теперь у нас есть простой и неуклюжий танк, котовый к накладыванию текстур. Советую пройти как можно больше туториалов по моделированию,
    поиграть со всеми опциями и тп. Время, потраченное на обучение, того стоит!<br/><br/>

    <b>UVMapping(развертка) и текстурирование 3д модели</b><br/><br/>
    <a target="_blank" href="https://ru.wikipedia.org/wiki/UV-%D0%BF%D1%80%D0%B5%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">википедия (на русском)</a><br/>
    Эта секция основана на <a target="_blank" href="http://springrts.com/phpbb/viewtopic.php?t=10612">данном туториале</a>.<br/>
    Окей, у нас есть серая и неуклюжая модель танка, и она нуждается в текстурировании.<br/>
    Чтобы это сделать, нам надо проделать операцию "UVMap"(развертку) над моделью. Что это значит? Нам надо взять поверхности нашей 3д модели и
    преобразовать их в 2д поверхность, которую мы сможем редактировать в редакторе изображений и потом обратно натянуть на 3д модель.<br/><br/>

    В данный момент, у модели 3 части: основание, ствол пушки и башня. Если мы начнем делать uvmapping прямо сейчас, то у нас будет
    3 файла с текстурами. Но движок Spring не может с ними работать в таком виде. Нам надо скомбинировать эти 3 части в 1 файл. <br/><br/>

    Вернемся к Wings 3D. Нажмите клавишу b, чтобы выбрать инструмент body (тело). Выделите всё, вызовите меню и выберите Combine. Так, вы
    получите единый объект. <br/>
    <img src="https://springrts.com/mediawiki/images/b/bd/Uv_1.png"><br/><br/>

    Теперь, вызовите меню и выберите пункт More->"UV Mapping". Откроется новое окно. Как только вы отдалите камеру, вы получите
    следующую картинку:<br/>
    <img src="https://springrts.com/mediawiki/images/9/96/Uv_2.png"><br/><br/>

    Чтобы развернуть модель, вам нужно разбить ее на фрагменты. Есть 3 основных способа сделать это:<br/>
    1) Вы можете выбрать грани, вызвать меню и выбрать пункт "Mark edges for cut". Модель будет нарезана вдоль этих граней.
    Это дает вам контроль над тем. какие грани должны идти вместе, а какие-отдельно.<br/><br/>

    2) Вы можете выбрать плоскости(фрагменты), вызвать меню и пометить их разными цветами. Программа разделит их согласно цветам.
    Плоскости одинакового цвета будут расположены вместе. Это дает вам контроль над группировкой этих фрагментов.<br/><br/>

    3) Вы можете вызвать меню и выбрать "Segment by" > "Projection". Программа сделает всю работу сама, предоставив вам набор цветных фрагментов.
    При этом вы теряете контроль над тем, что за чем идет, и иногда, этот способ дает вам очень странные результаты. Но этот способ настолько
    быстрый... что автор статьи пользуется им постоянно. Иногда приходится вручную немного поправить цвета после этой операции.<br/>
    <img src="https://springrts.com/mediawiki/images/8/82/Uv_3.png"><br/><br/>

    Сделайте так, как написано в 3 пункте. Пусть, на этот раз, все произойдет автоматически.<br/>
    Как только все грани и плоскости помечены, вызовите меню и выберите "Continue, Unfolding". Программа выдаст вам что-то вроде этого:<br/>
    <img src="https://springrts.com/mediawiki/images/2/29/Uv_4.png"><br/><br/>

    В этот момент лучше поменять размеры этих окошек внутри Wings 3D, потянув за нижний правый край. У вас должна быть возможность видеть 
    и модель и текстуру.<br/>
    <img src="https://springrts.com/mediawiki/images/b/bf/Uv_5.png"><br/><br/>

    Программа дала стандартные текстуры, подписанные буквами и цифрами. Это показывает, насколько дитализованной будет модель. Чем меньше буквы и цифры
     - тем меньше детали.<br/><br/>

    Вы можете видеть, что есть куча повторяющихся форм. Например, одна трапеция для левой гисиницы танка, и одна - для правой.
    Мы можем использовать одну и ту же текстуру для обоих. Так что, давайте передвинем одну в другую (наложим их друг на друга).<br/><br/>

    Самый простой способ это сделать: выделите обе трапеции, вызовите меню, выберите пункт "Move To" и потом "Center".
    Потом вы можете снова вызвать меню, выбрать "Move", и переместить куда захотите.<br/>
    <img src="https://springrts.com/mediawiki/images/5/5a/Uv_6.png"/><br/><br/>

    Сделайте то же самое для всех дублирующихся фрагментов.<br/>
    <img src="https://springrts.com/mediawiki/images/6/65/Uv_7.png"><br/><br/>

    Возможно, некоторые детали надо перевернуть, чтобы они совпадали. Поиграйтесь с пунктами меню. <br/><br/>

    Теперь посмотрите на ствол пушки. Некоторые стороны имеют буквы, эти буквы расположены в алфавитном порядке.
    Обратите внимание, в какую сторону они направлены. На одной стороне они могут быть направлены к башне, а на другой, например, от башни.<br/>
    <img src="https://springrts.com/mediawiki/images/f/f0/Uv_8.png"><br/><br/>

    Законченная модель будет выглядеть лучше, если все они будут напралены в одном направлении. В окне с 3Д моделью,
    выберите те плоскости, что направлены в "неправильную" сторону, затем переверните их в окне текстур.<br/>
    <img src="https://springrts.com/mediawiki/images/f/f0/Uv_9.png"><br/><br/>

    Теперь посмотрите на окно текстур. Там есть свободное место. Мы можем использовать его. Увеличьте некоторые фигуры.
    Это даст вам возможность использовать более качественные, более детализованные текстуры. <br/><br/>

    Осторожно, если у вас есть несколько фигур, которые наложены друг на друга, то кликнув по ним, вы выделите лишь верхнюю.
    Чтобы выделить обе, нажмите левую кнопку мыши и потяните. Будут выделены объекты на всех слоях, что попадут в выделение.<br/>
    <img src="https://springrts.com/mediawiki/images/b/b0/Uv_10.png"><br/><br/>

    Например, мы можем сделать самыми большими, текстуры тела танка. Потому, что они - самые главные. Было бы логично сделать
    их более детализованными. А текстуры, которые врядли кто-то увидит, можно сделать поменьше. Не забудьте сделать небольшие
    промежутки между фигурами, чтобы текстуры не перемешались.<br/><br/>

    Ну чтож, теперь развертка нашей модели завершена. Вы можете создать текстуры для нее. Вызовите меню и выберите пункт
    "Create Texture".<br/>
    <img src="https://springrts.com/mediawiki/images/9/9d/Uv_11.png"><br/><br/>

    Сначала нажмите на кнопку "Delete Unused Pass", чтобы убрать лишнее (буквы всякие). Теперь посмотрите на два выпадающих
    списка "background" и "draw edges", и на кнопки рядом с ними. Убедитесь, что для заднего фона стоит прозрачность (A, alpla) в значение 1.0, а не 0.0.
    Надо нажать на сам прямоугольник цвета и перетащить ползунок внизу. Так же, здесь есть настройки размера текстур.
    Чем чаще люди будут видеть этот юнит в игре, тем меньше должны быть текстуры. Например, 256x256 - это хороший размер для обычных юнитов.
    А для каких-нибудь редких юнитов, доступных в конце игры, можно сделать текстуры 1024x1024. <br/>
    Нажмите OK, и вы должны получить что-то вроде этого:<br/>
    <img src="https://springrts.com/mediawiki/images/3/31/Uv_12.png"/><br/><br/>

    Теперь, закройте "2d uv-editor" окно и посмотрите на окно "Outliner". Вы должны увидеть черно-белую квадратную текстуру.
    Нажмите на нее правой кнопкой мыши и выберите пункт меню "Make external". Сохраните где-нибудь этот файл, выбрав расширение .tgs
    в выпадающем списке.<br/><br/>

    Окей, вы можете свернуть программу Wings 3D и открыть ваш сохраненный .tga файл в графическом редакторе The GIMP.
    Закрывать Wings 3D не стоит так как он нам еще понадобится.<br/>
    <img src="https://springrts.com/mediawiki/images/b/bf/Uv_13.png"/><br/><br/>

    GIMP очень легок в использовании, я не буду вдаваться в детали в этой статье. Начните с заливки форм цветом и
    нарисуйте что-нибудь инструментом "карандаш". У Вас должно получиться что-то вроде этого:<br/>
    <img src="https://springrts.com/mediawiki/images/8/84/Uv_14.png"><br/><br/>

    ... или даже лучше и интереснее! Я не стал тратить на это много времени и покрыл все простой заливкой цветом +
    сделал немного камуфляжа. Вам так же нужно закрасить и черные полоски! Иначе, у вашей модели будут потом белые полоски.<br/><br/>

    Сохраните изображение и снова вернитесь в программу Wings 3D. Вы увидите, что старая текстура все еще используется.<br/>
    <img src="https://springrts.com/mediawiki/images/4/45/Uv_15.png"><br/><br/>
    
    Чтобы использовалась новая, просто нажите на нее правой кнопкой мыши и выберите "Refresh"(обновить) в меню.<br/>
    <img src="https://springrts.com/mediawiki/images/2/21/Uv_16.png"><br/><br/>

    Теперь все это выглядит более текстурно :-) Вы можете перемещаться туда-сюда между GIMP и Wings 3D, чтобы достичь
    оптимального результата. <br/><br/>

    Теперь, когда модель текстурирована, нам надо разъединить те части, что мы соединяли до этого. Если мы оставим все как есть,
    то пушка не сможет поворачиваться не зависимо от тела, чтобы стрелять. Воспользуйтесь "body" инструментом (клавиша b),
    выделите весь танк, вызовите меню и выберите пункт "Separate"(разъединить). <br/><br/>

    Все будет разобрано на составные части с какими-нибудь простыми именами типа "cube2_sep7". Желательно переименовать
    их во что-нибудь более понятное. Сделать это можно в окне "Geometry Graph": правой кнопкой мыши -> "Rename"(переименовать).
    Я бы дал имена "body"(тело), "turret"(башня), "gun"(ствол). <br/><br/>

    Вот и все! Модель готова! Да, она выглядит квадратной и простой, позже вы сможете делать более продвинутые модели!<br/>
    Готовую и оттекстурированную модель вы можете найти в архиве с игрой-примером (Example Mod).<br/><br/>

    Пока еще не закрывайте GIMP, нам он еще понадобится в следующей части данного руководства.<br/><br/>

    <b>Подготовка модели для использования ее движком Spring</b><br/><br/>
    Эта часть статьи основана на <a target="_blank" href="http://springrts.com/phpbb/viewtopic.php?f=14&t=13034">данном руководстве</a>.<br/><br/>

    Итак, у нас есть полностью текстурированая модель. Но нам же еще нужно как-то наложить цвет команды на юнит! Цвет текущего игрока,
    владельца юнита. Для этого, переключимся снова в GIMP. <br/><br/>

    В движке Spring для цвета команды используется Alpha канал (прозрачность). Большинство программ используют альфа канал для прозрачности,
    поэтому ваше изображение будет выглядеть немного странно в редакторах. Но зато это будет выглядеть отлично в игре. В альфа
    канале, белый - цвет команды, черный - это нет цвета команды, а средний - это что-то промежуточное. Если Вам все еще не понятно, то
    продолжайте читать дальше. Станет понятнее, когда мы закончим это делать.<br/><br/>

    Spring так же позволяет накладывать "вторичные" текстуры. В которых, крсный цвет используется для свечения, зеленый для отражения,
    альфа для прозрачности. Мы не будем рассматривать их здесь, просто полезно об этом знать. <br/><br/>

    В GIMP, если у вас получилось несколько слоев, схлопните их в один. Затем нажмите правой кнопкой на слое и выберите
    "Add Alpha Channel"(добавить альфа канал), если этот пункт доступен. Если недоступен, то у вас, возможно, уже есть альфа канал.<br/><br/>

    Нажмите "Colors > Components > Decompose". Вы увидите диалоговое окно, выберите там "RGBA".<br/>
    <img src="https://springrts.com/mediawiki/images/1/1c/Upspr_2.png"><br/><br/>

    После нажатия на ОК, вам будет показано другое, серое, окно. Так же, в окне "слои" появились 4 слоя: красный, зеленый, синий и альфа каналы.
    Вы можете заметить, что альфа канал - совершенно белый. Нам это не нужно тк сейчас весь наш юнит будет окрашен в цвет команды. Вместо этого,
    мы бы хотели видеть наши серый и камуфляжный цвета. <br/><br/>

    Скопируйте один из слоев в альфа слой, чтобы вы могли видеть, что где находится. Затем, следайте абсолютно все черным, кроме нашей текстуры пушки.
    Пушку сделайте белой. Или переместите слой наверх и сделайте его полупрозрачным на время, чтобы видеть, что под ним. <br/>
    <img src="https://springrts.com/mediawiki/images/7/74/Upspr_3.png"><br/><br/>

    Затем, выберите в меню "Colors > Components > Recompose". И переключитесь на окно с первоначальным изображением. Вы увидите, что всё
    исчезло, кроме пушки, которую мы пометили белым. Не паникуйте, оно все еще здесь, просто прозрачное. Сохраните .tga файл. <br/><br/>

    Альтернативно, можно сохранить в формат DDS. Он лучше подходит для моделирования. Но для этого нужен GIMP плагин. Поэтому, пока что
    останемся на формате .tga.<br/><br/>

    Теперь можно закрыть GIMP. <br/><br/>

    Далее, нам нужно перенести нашу модель из программы Wings 3D в программу UpSpring. Переключитесь в Wings 3d, выберите
    в меню пункт "File -> Export" и нажмите на квадратик рядом с "3D Studio (3ds)". Вам будет предложено несколько опций. <br/>
    <img src="https://springrts.com/mediawiki/images/2/2d/Upspr_4.png"/><br/><br/>

    Уберите галку с "Swap X and Y axes", обе галки "Export normals" и "UV coords" должны быть включены. Тип текстур по умолчанию(нижний выпадаюший список)
    должен быть выставлен в tga. Нажмите OK и сохраните куда-нибудь, где вы сможете потом это найти. <br/><br/>

    Теперь, вам нужно открыть программу UpSpring. Установите ее <a target="_blank" href="https://springrts.com/wiki/Upspring">отсюда</a>.<br/><br/>
    
    Запустите UpSpring, она выглядит примерно так:<br/>
    <img src="https://springrts.com/mediawiki/images/a/a8/Upspr_5.png"/><br/><br/>
    
    Выберите в меню "File -> Load model", и укажите путь до вашего файла с расширением 3ds. В окне открытия файла, в выпадающем списке, 
    выберите 3ds, иначе вашего файла будет не видно.<br/><br/>
    <img src="https://springrts.com/mediawiki/images/2/21/Upspr_6.png"/><br/><br/>
    
    После этого, появится окно, в котором спрашивается: мы нашли несколько объектов в файле, что с ними делать? Надо выбрать пункт 2 "load all objects ..."(загрузить 
    все объекты как дочерние к пустому корневобу объекту)<br/>
    <img src="https://springrts.com/mediawiki/images/7/76/Upspr_7.png"/><br/><br/>
    
    Вот и ваша модель. Выглядит маленькой и без текстур. Справа выберите "Objects" вкладку.<br/>
    <img src="https://springrts.com/mediawiki/images/0/02/Upspr_8.png"/><br/><br/>
    
    Вы можете видеть иерархию кусочков модели. Эта иерархия определяет: какие куски движатся, когда двигают другие куски. 
    Например, мы хотим, чтобы ствол двигался, когда мы двигаем башню. И мы хотим, чтобы ствол и башня двигались, когда мы 
    двигаем тело. Для этих целей воспользуемся кнопками "cut and paste"(вырезать и вставить), чтобы перераспределить объекты вот так:<br/>
    <img src="https://springrts.com/mediawiki/images/e/e2/Upspr_9.png"/><br/><br/>
    
    Далее, нам нужно определить точку сцепления для каждого куска, чтобы определить, как они будут вращаться относительно друг друга. 
    Приблизьте камеру "Zoom in", чтобы вы могли лучше видеть, что происходит. Нажмите правой кнопкой мыши и поводите. <br/>
    Затем, выберите инструмент (на панели слева) "Select origin move tool" и выберите башню(не ствол) в иерархии объектов. <br/>
    <img src="https://springrts.com/mediawiki/images/9/95/Upspr_10.png"/><br/><br/>
    
    Поля "X pos, Y pos и Z pos" - позиция точки сцепления. По умолчанию, все установлено в (0, 0, 0). Потяните за точку 
    мышью так, чтобы она оказалась в центре шара, где прикрепляется пушка. Координаты при этом меняются сами. У меня, к примеру, получились (0, 12, 0).<br/>
    <img src="https://springrts.com/mediawiki/images/2/2f/Upspr_11.png"/><br/><br/>
    
    Если посмотреть на ствол, то его точка так же находится теперь в этом месте. Это благодаря иерархии. <br/><br/>
    
    На самом деле, нам понадобится еще 1 кусок модели, чтобы указать конец дула, откуда будут вылетать пули. Для этого, 
    выделите ствол и нажмите "Add empty"(добавить пустой) и надовите этот кусок "flare". Поместите его туда, где заканчивается дуло. <br/>
    <img src="https://springrts.com/mediawiki/images/a/a6/Upspr_12.png"/><br/><br/>
    
    Теперь перейдите на вкладку "Model". Здесь находятся настройки для радиуса модели и ее центра. Так же здесь задается 
    высота модели(определяет, где будет в игре отображаться полоска жизней юнита) и сфера попадания(когда считается, что пуля попала в танк). 
    Здесь есть кнопка "Estimate"(вычислить автоматически), но иногда, после неё, требуется ручная коррекция. <br/><br/>
    
    Чтобы увидеть, что делают эти настройки, нажмите на кнопку "3D" вверху нижней правой части экрана и выберите "Draw model radius and height"(рисовать 
    радиус и высоту). <br/>
    <img src="https://springrts.com/mediawiki/images/2/24/Upspr_13.png"/><br/><br/>
    
    Теперь, юниту нужна текстура. Перейдите на вкладку "Mapping", нажмите "Browse" для "texture 1" и загрузите текстуру, созданную 
    на предидущих шагах. <br/>
    <img src="https://springrts.com/wiki/File:Upspr_14.png"/><br/><br/>
    
    Так как мы используем TGA текстуру, а не DDS, нам нужно сделать еще один дополнительный шаг. Выберите в меню пункт "Texture Mapping", затем 
    выберите пункт "Show UV Mapping". Оно отобразит текстуру. Нажмите "Edit"->"Flip UVs". Закройте редактор.<br/>
    <img src="https://springrts.com/mediawiki/images/a/a1/Upspr_15.png"/><br/><br/>
    
    Теперь, ваши текстуры выглядят немного странно на юните. Не беспокойтест, в игре они будут выглядеть хорошо. <br/><br/>
    
    И еще один шаг: Выберите в меню "Object > Recalculate vertex normals, 3d0 style > All objects" и нажмите ОК в появившемся окне. 
    Это сделает нашу модель и текстуры чуть красивее.<br/><br/>
    
    Теперь сохраните все в формате s3o (File -> Save model as -> "tank.s3o"). Вот и все! Модель юнита готова! Теперь поместим ее в игру!<br/><br/>
    
    <b>Добавляем юнит в игру</b><br/><br/>

    Движок Spring использует ".sdz" и ".sd7" форматы файлов для данных игры. Это просто переименованные ".zip" и ".7z" архивы соответственно.
    Просто переименуйте их и распакуйте. Так же, движок Spring позволяет вам не упаковывать вовсе. Просто положите директорию с
    игрой в папку %spring%/games и переименуйте ее так, чтобы имя оканчивалось на ".sdd". <br/><br/>

    Лучше всего начать со скачивания <a target="_blank" href="http://www.springfiles.com/show_file.php?id=2820">игры-примера</a>.
    Скачайте ее и распакуйте в директорию "EmptyMod.sdd", а затем поместите эту директорию в поддиректорию "games" каталога, куда
    установлен Spring. <br/><br/>

    Чтобы увидеть юнит в игре, вам надо положить s3o файл в папку "objects3d", текстуру в папку "unittextures". И еще,
    файл "unitdef" в "units". Этого unitdef у нас еще нет. Положите текстуру и модель в соответствующие директории. <br/><br/>

    А файл unitdef(описание юнита), мы сейчас будем создавать.<br/><br/>

    Существует 2 способа это делать: 1) старый, в стиле игры Total Annihilation 2) новый, в формате .lua. Старый - это
    текстовый файл в формате FBI, в котором перечислен список переменных. Новый это так же текстовый файл, с расширением .lua,
    в нем так же перечисленны переменные, просто используется немного другой синтаксис. Мы будем использовать .lua вариант.<br/><br/>

<pre><code class="lua">
    local unitName  =  "tank"

    local unitDef  =  {
    --Internal settings
    BuildPic = "filename.bmp",
    Category = "TANK SMALL NOTAIR NOTSUB",
    ObjectName = "tank3.s3o",
    name = "Generic Tank",
    Side = "TANKS",
    TEDClass = "TANK",
    UnitName = "tank",
    script = "tankscript.lua",

    --Unit limitations and properties
    BuildTime = 1000,
    Description = "A generic tank unit.",
    MaxDamage = 800,
    RadarDistance = 0,
    SightDistance = 400,
    SoundCategory = "TANK",
    Upright = 0,

    --Energy and metal related
    BuildCostEnergy = 100,
    BuildCostMetal = 0,

    --Pathfinding and related
    Acceleration = 0.15,
    BrakeRate = 0.1,
    FootprintX = 2,
    FootprintZ = 2,
    MaxSlope = 15,
    MaxVelocity = 2.0,
    MaxWaterDepth = 20,
    MovementClass = "Default2x2",
    TurnRate = 900,

    --Abilities
    Builder = 0,
    CanAttack = 1,
    CanGuard = 1,
    CanMove = 1,
    CanPatrol = 1,
    CanStop = 1,
    LeaveTracks = 0,
    Reclaimable = 0,

    --Hitbox
    --    collisionVolumeOffsets    =  "0 0 0",
    --    collisionVolumeScales     =  "20 20 20",
    --    collisionVolumeTest       =  1,
    --    collisionVolumeType       =  "box",

    --Weapons and related
    BadTargetCategory = "NOTAIR",
    ExplodeAs = "TANKDEATH",
    NoChaseCategory = "AIR",

    }

    return lowerkeys({ [unitName]  =  unitDef })
</code></pre>
    Просмотрите весь этот текст. Постарайтесь понять, что означает каждая переменная. Описание всех этих переменных уже
    выходит за рамки этой статьи, документацию можно посмотреть <a target="_blank" href="https://springrts.com/wiki/Gamedev:UnitDefs">здесь</a>.<br/><br/>

    Вам нужно изменить ObjectName, укажите здесь имя вашего файла-модели. Так же, можете поменять имя юнита (unitName). Далее,
    сохраните этот файл как tank.lua, например, и положите его в "units" директорию.<br/><br/>

    Далее, откройте файл "/gamedata/sidedata.lua" и замените эту строчку 'startunit = "cube"' на эту: 'startunit = "tank".<br/><br/>

    Откройте SpringLobby. Это приложение, которое устанавливается с движком Spring. Затем перейдите на вкладку "Single Player"(одиночная игра)
    и выберите любую карту и игру "Example Mod". Добавьте бота, например AAI, и запустите игру. Попробуйте найти свой танк. <br/>
    <img src="https://springrts.com/mediawiki/images/e/ec/Mod_2.png"><br/><br/>

    Вы должны иметь возможность выделить его и погонять по местности, нажимая правой кнопкой мыши. Он все еще не может стрелять, но
    все будем делать постепенно. <br/><br/>

    Мы сделаем так, чтобы танк стрелял маленькими оранжевыми шарами. Для этого, нам надо 3 вещи: картинка оранжевого шара,
    скрипт анимации юнита, описание оружия в unitdef файле.<br/><br/>

    В качестве картинки с оранжевым шаром, мы возьмем файлик из игры "Evolution RTS". Кстати, хорошая игра, рекомендуется познакомиться.
    Этот файл мы уже скачали за вас и положили в "bitmaps" директорию. Чтобы движку Spring сказать, где находится этот файл,
    мы вставим эту строчку: "flame = 'flame.tga' " в файл gamedata/resources.lua (внутри секции projectiletextures). <br/><br/>

    Откройте файл unitdef, который вы создавали и сохраняли ранее (tank.lua или как-то так). И замените его сорержимое на это:<br/>
    <pre>
        <code class="lua">
            local unitName  =  "tank"

            local unitDef  =  {
            --Internal settings
            BuildPic = "filename.bmp",
            Category = "TANK SMALL NOTAIR NOTSUB",
            ObjectName = "tank3.s3o",
            name = "Generic Tank",
            Side = "TANKS",
            TEDClass = "TANK",
            UnitName = "tank",
            script = "tankscript.lua",

            --Unit limitations and properties
            BuildTime = 1000,
            Description = "A generic tank unit.",
            MaxDamage = 800,
            RadarDistance = 0,
            SightDistance = 400,
            SoundCategory = "TANK",
            Upright = 0,

            --Energy and metal related
            BuildCostEnergy = 100,
            BuildCostMetal = 0,

            --Pathfinding and related
            Acceleration = 0.15,
            BrakeRate = 0.1,
            FootprintX = 2,
            FootprintZ = 2,
            MaxSlope = 15,
            MaxVelocity = 2.0,
            MaxWaterDepth = 20,
            MovementClass = "Default2x2",
            TurnRate = 900,

            --Abilities
            Builder = 0,
            CanAttack = 1,
            CanGuard = 1,
            CanMove = 1,
            CanPatrol = 1,
            CanStop = 1,
            LeaveTracks = 0,
            Reclaimable = 0,

            --Hitbox
            --    collisionVolumeOffsets    =  "0 0 0",
            --    collisionVolumeScales     =  "20 20 20",
            --    collisionVolumeTest       =  1,
            --    collisionVolumeType       =  "box",

            --Weapons and related
            BadTargetCategory = "NOTAIR",
            ExplodeAs = "TANKDEATH",
            NoChaseCategory = "AIR",

            weapons = {
            [1] = {
            def = "orangeblob",
            },
            },
            }

            local weaponDefs = {
            orangeblob = {
            name = "Orange Plasma Cannon",
            weapontype = "Cannon",
            accuracy = 10,
            areaofeffect = 100,
            avoidfeature = false,
            avoidfriendly = true,
            canattackground = true,
            collidefriendly = true,
            collisionsize = 8,
            commandfire = false,
            craterboost = 0,
            cratermult = 0,
            edgeeffectiveness = 0.1,
            explosionspeed = 128,
            impulseboost = 0,
            impulsefactor = 0,
            intensity = 1,
            noselfdamage = true,
            size = 4,
            --        soundstart = "tank_fire",
            --        soundhit = "explo01",
            range = 250,
            reloadtime = 1.5,
            rgbcolor = "1.0 1.0 1.0",
            turret = true,
            texture1 = "flame",
            weaponvelocity = 400,
            --		explosiongenerator = "custom:TANKGUN_FX",
            damage =
            {
            default = 55,
            },
            },
            }


            unitDef.weaponDefs = weaponDefs
            return lowerkeys({ [unitName]  =  unitDef })
        </code>
    </pre>

    Опять же, обновите имя файла с юнитом, как вы делали это раньше. <br/>
    Заметьте, что мы добавили секцию с описанием оружия "weaponDefs".<br/><br/>


</wicket:extend>

</body>
</html>
